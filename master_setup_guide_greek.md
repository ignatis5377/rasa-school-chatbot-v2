# Ο Απόλυτος Οδηγός Εγκατάστασης Σχολικού Chatbot ("The Master Guide")

Αυτό το έγγραφο αποτελεί τον πλήρη, βήμα-προς-βήμα οδηγό για το στήσιμο του συστήματος από το μηδέν. Απευθύνεται σε τεχνικούς που θέλουν να αναπαράγουν ακριβώς την υποδομή μας.

---

## Φάση 1: Προετοιμασία & Τοπική Ανάπτυξη ("The Brain")

Πριν βγούμε στο ίντερνετ, πρέπει να χτίσουμε το μυαλό του Chatbot στον υπολογιστή μας.

### 1. Εργαλεία που χρειαστήκαμε
*   **Python (3.10):** Η γλώσσα προγραμματισμού.
*   **VS Code:** Ο επεξεργαστής κώδικα.
*   **Git:** Για να κρατάμε ιστορικό αλλαγών.

### 2. Δημιουργία του Rasa Project
1.  Εγκατάσταση βιβλιοθήκης: `pip install rasa`
2.  Αρχικοποίηση: `rasa init` (Αυτό δημιούργησε τους φακέλους `data`, `actions`, `models`).
3.  **Εκπαίδευση (Training):**
    *   Στο `data/nlu.yml` γράψαμε τι θα ρωτάνε οι μαθητές (π.χ. "Θέλω διαγώνισμα").
    *   Στο `domain.yml` ορίσαμε τις απαντήσεις.
    *   Εκπαιδεύσαμε το μοντέλο: `rasa train`.

### 3. Ανάπτυξη Λογικής (Python Actions)
Εδώ γράψαμε τον κώδικα στο `actions/actions.py`:
*   **Word Parser:** Χρησιμοποιήσαμε τη βιβλιοθήκη `python-docx` και Regular Expressions για να "διαβάζουμε" ερωτήσεις και απαντήσεις από αρχεία Word.
*   **PDF Generator:** Χρησιμοποιήσαμε το `reportlab` για να σχεδιάζουμε δυναμικά τα διαγωνίσματα, βάζοντας το λογότυπο του σχολείου, τις εκφωνήσεις και τις εικόνες.
*   **SQLite Database:** Φτιάξαμε μια βάση για να αποθηκεύουμε το υλικό (`questions.db`).

---

## Φάση 2: Containerization ("The Box")

Για να μην έχουμε το πρόβλημα *"Στον δικό μου υπολογιστή δουλεύει, στον Server όχι"*, κλείσαμε τα πάντα σε κουτιά (Docker Containers).

### 1. Docker Desktop
Το εγκαταστήσαμε στα Windows για να εξομοιώσουμε το περιβάλλον Linux.

### 2. Τα Αρχεία Docker
*   **`Dockerfile`:** Μία "συνταγή" που λέει: *"Πάρε Python, βάλε τα ελληνικά Fonts (DejaVuSans), βάλε τις βιβλιοθήκες μου και φτιάξε τον Action Server"*.
*   **`docker-compose.yml`:** Ο "μαέστρος". Λέει: *"Ξεκίνα το Rasa, μετά τον Action Server και τέλος τον Nginx. Σύνδεσέ τα μεταξύ τους"*.

---

## Φάση 3: Το Σύννεφο (Google Cloud Platform)

Ήρθε η ώρα να βγούμε Online.

### 1. Δημιουργία Server (VM Instance)
*   Πήγαμε στο **Compute Engine**.
*   Φτιάξαμε ένα Instance (VM) με λειτουργικό **Ubuntu 20.04**.
*   Επιλέξαμε τύπο **e2-medium** (4GB RAM) για να αντέχει το Rasa.

### 2. Δικτύωση (Networking)
*   **Static IP:** "Αγοράσαμε" μια σταθερή διεύθυνση IP (VPC Network -> External IP addresses) για να μας βρίσκει πάντα το σχολείο.
*   **Firewall:** Ανοίξαμε τις πόρτες στο τείχος προστασίας:
    *   `tcp:80` (HTTP - Για απλή περιήγηση)
    *   `tcp:443` (HTTPS - Για ασφαλή περιήγηση)
    *   `tcp:22` (SSH - Για να μπαίνουμε εμείς)

### 3. Σύνδεση (SSH)
Συνδεθήκαμε στον Server μέσω του μαύρου παραθύρου (Terminal) για να τον στήσουμε.

---

## Φάση 4: Εγκατάσταση στον Server (Deployment)

Αφού μπήκαμε στον Server:

### 1. Εγκατάσταση Εργαλείων
```bash
sudo apt update
sudo apt install docker.io docker-compose git
```

### 2. Μεταφορά Κώδικα (Git)
*   Ανεβάσαμε τον κώδικα από το PC μας στο GitHub (`git push`).
*   Τον κατεβάσαμε στον Server: `git clone https://github.com/.../rasa-project.git`.

### 3. Εκκίνηση (Launch)
Μπήκαμε στον φάκελο και δώσαμε την εντολή:
```bash
sudo docker-compose up -d --build
```
Το Docker κατέβασε τα πάντα, έχτισε τα containers και ξεκίνησε το Chatbot.

---

## Φάση 5: Ασφάλεια & Ιστός (The Web Layer)

Για να είναι επαγγελματικό και ασφαλές:

### 1. Nginx (Reverse Proxy)
Ρυθμίσαμε έναν Web Server (Nginx) να κάθεται μπροστά από το Rasa.
*   Δέχεται τα αιτήματα από το ίντερνετ.
*   Σερβίρει τα PDF αρχεία (`/files/...`).
*   Προστατεύει τον Rasa Server.

### 2. SSL/HTTPS (Certbot)
Χρησιμοποιήσαμε το **Certbot** (Let's Encrypt) για να πάρουμε το "πράσινο λουκετάκι".
*   Ρυθμίσαμε το Nginx να ανακατευθύνει όλα τα αιτήματα σε HTTPS (Port 443).
*   Εξασφαλίσαμε ότι τα δεδομένα των μαθητών είναι κρυπτογραφημένα.

---

## Φάση 6: Διασύνδεση με WordPress (The Frontend)

Το τελικό βήμα: Να βάλουμε το Chatbot στο Site του σχολείου.

### 1. Το Widget
Πήραμε τον κώδικα Javascript του **Rasa Webchat** και τον βάλαμε στο `footer.php` του WordPress theme.

### 2. Η Αυθεντικοποίηση (The Magic Trick)
Γράψαμε κώδικα PHP που ελέγχει αν ο χρήστης είναι συνδεδεμένος στο WordPress.
*   Αν ΝΑΙ -> Παίρνει το όνομα και τον ρόλο του.
*   Τα στέλνει κρυφά στο Chatbot (`initPayload`).
*   Το Chatbot (Action Server) διαβάζει αυτή την πληροφορία και αποφασίζει αν θα επιτρέψει το "Ανέβασμα Υλικού" (μόνο για Admin) ή το "Διαγώνισμα" (για όλους).

---

## Συμπέρασμα

Στήσαμε ένα πλήρες, μοντέρνο σύστημα DevOps:
*   **Code:** Python/Rasa
*   **Infrastructure:** Docker/GCP
*   **Security:** Nginx/SSL/Firewall
*   **Integration:** WordPress/PHP/JS

Το σύστημα είναι αυτόνομο, ασφαλές και έτοιμο για χρήση!
